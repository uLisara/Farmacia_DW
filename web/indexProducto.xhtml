<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">
    <h:head>
        <title>Facelet Title</title>
       
    </h:head>
    <h:body> 
        <b:navBar brand="info@company.com" brandHref="#" fluid="true" style="background-color: #daab13; font-family:serif; font-size:smaller ">
             <b:navbarLinks pull="right" styleClass="hidden-xs"> 
                 <b:socialShare shares="twitter,linkedin,facebook"
               showLabel="true" show-count="false"
               text="BootsFaces rocks!" block-message="Click to unblock the share buttons" />
            </b:navbarLinks> 
        </b:navBar>
        <b:navBar brand="Nombre de la Farmacia" brandHref="#" fluid="true">
            <b:navbarLinks>
                <b:navLink value="Productos" href="indexProducto.xhtml"></b:navLink>
            </b:navbarLinks>
            <b:navbarLinks pull="right"><b:navLink value="    " href="#"></b:navLink></b:navbarLinks>
                <b:navbarLinks pull="right" styleClass="hidden-xs"> 
                    <b:navLink value="Carrito" href="carrito.xhtml" iconAwesome="shopping-cart"></b:navLink>
                </b:navbarLinks>
        </b:navBar> 
        <c:forEach items="#{managedProducto.listaPro}" var="a">
            <h:form>
                <div class="col-md-4" style="padding-left: 20px; padding-right: 20px; padding-bottom: 20px; padding-top: 20px" ><br></br>
                    <h:graphicImage value="#{a.imagen}"
                                    height="100" width="100" style="align-self: center" />
                    <div class="card-body" style="align-content: center">
                        <h:outputText value="#{a.nombrepro}" class="card-title" style="align-content: center;"/><br/>
                        <h:outputText value="#{a.idpro}" style="align-self: center;"></h:outputText><br/>
                        <h:outputText title="Precio" value="#{a.preciopro}" style="align-self: center;"/><br></br>
                        <h:outputText title="Stock" value="#{a.stockpro}" style="align-self: center;" /><br></br>
                        
                        <p:spinner id="minMax" value="#{managedDetallePedido.spin}" min="0" max="#{a.stockpro}" style="align-items: center" >
                            </p:spinner>
                        
                        <h:commandButton style="background-color: #0066cc" class="btn btn-primary" value="Agregar al Carrito" actionListener="#{managedDetallePedido.agregaCarrito(a)}" ></h:commandButton>
                    </div>
                </div>
            </h:form> 
        </c:forEach>
        <h:form>
            <b:dataTable value="#{managedDetallePedido.listCarrito}" var="c">
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Codigo c"/>
                    </f:facet>
                    <h:outputText value="#{c.iddetallepe}"></h:outputText>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Codigo p"/>
                    </f:facet>
                    <h:outputText value="#{c.idproductodetallepe.idpro}"></h:outputText>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Nombre"/>
                    </f:facet>
                    <h:outputText value="#{c.idproductodetallepe.nombrepro}"></h:outputText>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Cantidad"/>
                    </f:facet>
                    <h:outputText value="#{c.cantidaddetellepe}"></h:outputText>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Precio U"/>
                    </f:facet>
                    <h:outputText value="#{c.idproductodetallepe.preciopro}"></h:outputText>
                </h:column>
                
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Precio Total"/>
                    </f:facet>
                    <h:outputText value="#{c.totaldetallepe}"></h:outputText>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Accion:"/>
                    </f:facet>
                    <h:commandButton style="background-color: #ff0000" class="btn btn-primary" value="Eliminar" actionListener="#{managedDetallePedido.eliminarProductoCarrito(c.idproductodetallepe.idpro)}"/>
                </h:column>
            </b:dataTable>
            <h:outputText value="Total a pagar: #{managedDetallePedido.total}"/> 
            <br></br>
            <b:commandButton style="background-color: #0066cc" class="btn btn-primary" value="Procesar" action="ProcesoCompra"></b:commandButton>
        </h:form>
    </h:body>
</html>

